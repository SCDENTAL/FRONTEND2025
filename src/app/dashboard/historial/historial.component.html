<!-- <mat-form-field class="w-full">
  <input
    type="text"
    placeholder="Buscar paciente"
    aria-label="Paciente"
    matInput
    [matAutocomplete]="auto"
    (input)="buscar($event)"
    [(ngModel)]="textoBusqueda"
  >
  <mat-autocomplete 
    #auto="matAutocomplete" 
    (optionSelected)="verHistorial($event.option.value)"
    [displayWith]="mostrarPaciente">
    <mat-option *ngFor="let paciente of pacientes" [value]="paciente">
      {{ paciente.nombre }} {{ paciente.apellido }} - DNI: {{ paciente.dni }}
    </mat-option>
  </mat-autocomplete>
</mat-form-field>

<div *ngIf="historial.length > 0">
  <h3>Historial de {{ pacienteSeleccionado?.nombre }}:</h3>

  <table mat-table [dataSource]="historial" class="mat-elevation-z2">

    
    <ng-container matColumnDef="fecha">
      <th mat-header-cell *matHeaderCellDef> Fecha </th>
      <td mat-cell *matCellDef="let turno"> 
        {{ turno.fecha | date:'dd/MM/yyyy' }}
      </td>
    </ng-container>

    
    <ng-container matColumnDef="horario">
      <th mat-header-cell *matHeaderCellDef> Horario </th>
      <td mat-cell *matCellDef="let turno"> {{ turno.horario }} </td>
    </ng-container>

    
    <ng-container matColumnDef="odontologo">
      <th mat-header-cell *matHeaderCellDef> Odont√≥logo </th>
      <td mat-cell *matCellDef="let turno"> {{ turno.odontologo }} </td>
    </ng-container>

    
    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef> Estado </th>
      <td mat-cell *matCellDef="let turno">
        <span [ngClass]="getEstadoTurno(turno).clase">
          {{ getEstadoTurno(turno).texto }}
        </span>
      </td>
    </ng-container>

    
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>
  

<div *ngIf="historial.length === 0 && pacienteSeleccionado">
  <p>No se encontraron turnos para este paciente.</p>
</div> -->


<mat-form-field class="w-full">
  <input
    type="text"
    placeholder="Buscar paciente"
    aria-label="Paciente"
    matInput
    [matAutocomplete]="auto"
    (input)="buscar($event)"
    [(ngModel)]="textoBusqueda"
  >
  <mat-autocomplete 
    #auto="matAutocomplete" 
    (optionSelected)="verHistorial($event.option.value)"
    [displayWith]="mostrarPaciente">
    <mat-option *ngFor="let paciente of pacientes" [value]="paciente">
      {{ paciente.nombre }} {{ paciente.apellido }} - DNI: {{ paciente.dni }}
    </mat-option>
  </mat-autocomplete>
</mat-form-field>

<div *ngIf="dataSource.data.length > 0">
  <h3>Historial de {{ pacienteSeleccionado?.nombre }}:</h3>

  <table mat-table [dataSource]="dataSource" class="mat-elevation-z2">

    <!-- Fecha -->
    <ng-container matColumnDef="fecha">
      <th mat-header-cell *matHeaderCellDef> Fecha </th>
      <td mat-cell *matCellDef="let turno"> 
        {{ turno.fecha | date:'dd/MM/yyyy' }}
      </td>
    </ng-container>

    <!-- Horario -->
    <ng-container matColumnDef="horario">
      <th mat-header-cell *matHeaderCellDef> Horario </th>
      <td mat-cell *matCellDef="let turno"> {{ turno.horario }} </td>
    </ng-container>

    <!-- Odont√≥logo -->
    <ng-container matColumnDef="odontologo">
      <th mat-header-cell *matHeaderCellDef> Odont√≥logo </th>
      <td mat-cell *matCellDef="let turno"> {{ turno.odontologo }} </td>
    </ng-container>

    <!-- Estado -->
    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef> Estado </th>
      <td mat-cell *matCellDef="let turno">
        <span [ngClass]="getEstadoTurno(turno).clase">
          {{ getEstadoTurno(turno).texto }}
        </span>
      </td>
    </ng-container>

    <!-- Header y filas -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <!-- üîπ Paginador -->
  <mat-paginator [length]="dataSource?.data?.length || 0"
                 [pageSize]="5"
                 [pageSizeOptions]="[5, 10, 20]">
  </mat-paginator>
</div>

<div *ngIf="dataSource.data.length === 0 && pacienteSeleccionado">
  <p>No se encontraron turnos para este paciente.</p>
</div>
